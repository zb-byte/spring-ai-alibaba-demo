<!DOCTYPE html>
<html>
<head>
    <title>A2A Client Demo</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 1000px; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .status { padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .endpoint { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #007bff; }
        .code { font-family: monospace; background: #f0f0f0; padding: 2px 6px; border-radius: 3px; }
        .btn { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #0056b3; }
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #1e7e34; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }
        .form-group { margin: 15px 0; }
        .form-control { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .response-area { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0; min-height: 100px; white-space: pre-wrap; font-family: monospace; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– A2A gRPC Client Demo</h1>
        <p>åŸºäº A2A Java SDK v0.3.3.Final çš„å®¢æˆ·ç«¯æµ‹è¯•å·¥å…·</p>
        
        <div class="grid">
            <div>
                <h2>ğŸ“¡ æœåŠ¡å™¨è¿æ¥æµ‹è¯•</h2>
                <div class="endpoint">
                    <strong>ç›®æ ‡æœåŠ¡å™¨:</strong><br>
                    <span class="code">http://localhost:7002</span><br>
                    <strong>gRPC ç«¯å£:</strong> <span class="code">9090</span>
                </div>
                
                <button class="btn" onclick="testConnection()">ğŸ” æµ‹è¯•è¿æ¥</button>
                <button class="btn btn-success" onclick="getAgentCard()">ğŸ“„ è·å– Agent Card (HTTP)</button>
                <button class="btn btn-warning" onclick="getAgentCardA2A()">ğŸš€ è·å– Agent Card (A2A SDK)</button>
                
                <div id="connectionStatus" class="response-area">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•è¿æ¥...</div>
            </div>
            
            <div>
                <h2>ğŸ’¬ æ¶ˆæ¯æµ‹è¯•</h2>
                <div class="form-group">
                    <label>æµ‹è¯•æ¶ˆæ¯:</label>
                    <input type="text" id="testMessage" class="form-control" value="Hello, A2A Echo Agent!" placeholder="è¾“å…¥è¦å‘é€çš„æ¶ˆæ¯">
                </div>
                
                <button class="btn btn-warning" onclick="sendMessage()">ğŸ“¤ å‘é€æ¶ˆæ¯ (HTTPæ¨¡æ‹Ÿ)</button>
                <button class="btn btn-success" onclick="sendMessageA2A()">ğŸš€ å‘é€æ¶ˆæ¯ (A2A SDK)</button>
                <button class="btn" onclick="testGrpcConnection()">ğŸ”Œ æµ‹è¯• gRPC è¿æ¥</button>
                
                <div id="messageResponse" class="response-area">æ¶ˆæ¯å“åº”å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
            </div>
        </div>
        
        <h2>ğŸ› ï¸ å¼€å‘çŠ¶æ€</h2>
        <ul>
            <li>âœ… Maven ä¾èµ–é…ç½® (A2A SDK v0.3.3.Final)</li>
            <li>âœ… Spring Boot é›†æˆ</li>
            <li>âœ… æœåŠ¡å™¨è¿æ¥æµ‹è¯•</li>
            <li>âœ… Agent Card è·å– (HTTP + A2A SDK)</li>
            <li>âœ… A2A å®¢æˆ·ç«¯æœåŠ¡æ¡†æ¶</li>
            <li>âœ… æ¶ˆæ¯å‘é€/æ¥æ”¶ (HTTP + A2A SDK æ¡†æ¶)</li>
            <li>â³ å®Œæ•´ gRPC å®¢æˆ·ç«¯å®ç° (å¾… SDK API ç ”ç©¶)</li>
            <li>â³ æµå¼å“åº”å¤„ç† (å¾…å¼€å‘)</li>
        </ul>
        
        <h2>ğŸ“š API ç«¯ç‚¹</h2>
        <div class="endpoint">
            <strong>è¿æ¥æµ‹è¯•:</strong> <span class="code">GET /api/test-connection</span><br>
            <strong>Agent Card (HTTP):</strong> <span class="code">GET /api/agent-card</span><br>
            <strong>Agent Card (A2A SDK):</strong> <span class="code">GET /api/agent-card-a2a</span><br>
            <strong>å‘é€æ¶ˆæ¯ (HTTP):</strong> <span class="code">POST /api/send-message</span><br>
            <strong>å‘é€æ¶ˆæ¯ (A2A SDK):</strong> <span class="code">GET /api/send-message-a2a?message=xxx</span>
        </div>
        
        <h2>ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
        <ol>
            <li>ç¡®ä¿ A2A Server æ­£åœ¨è¿è¡Œ: <span class="code">cd ../a2a-server-module-grpc && ./start-server.sh</span></li>
            <li>ç‚¹å‡» "æµ‹è¯•è¿æ¥" éªŒè¯æœåŠ¡å™¨çŠ¶æ€</li>
            <li>ç‚¹å‡» "è·å– Agent Card" æŸ¥çœ‹ Agent ä¿¡æ¯</li>
            <li>è¾“å…¥æ¶ˆæ¯å¹¶æµ‹è¯•å‘é€åŠŸèƒ½</li>
        </ol>
    </div>
    
    <script>
        async function testConnection() {
            const statusDiv = document.getElementById('connectionStatus');
            statusDiv.textContent = 'æ­£åœ¨æµ‹è¯•è¿æ¥...';
            
            try {
                const response = await fetch('/api/test-connection');
                const result = await response.json();
                statusDiv.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                statusDiv.textContent = 'è¿æ¥æµ‹è¯•å¤±è´¥: ' + error.message;
            }
        }
        
        async function getAgentCard() {
            const statusDiv = document.getElementById('connectionStatus');
            statusDiv.textContent = 'æ­£åœ¨è·å– Agent Card...';
            
            try {
                const response = await fetch('/api/agent-card');
                const result = await response.json();
                statusDiv.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                statusDiv.textContent = 'Agent Card è·å–å¤±è´¥: ' + error.message;
            }
        }
        
        async function getAgentCardA2A() {
            const statusDiv = document.getElementById('connectionStatus');
            statusDiv.textContent = 'æ­£åœ¨é€šè¿‡ A2A SDK è·å– Agent Card...';
            
            try {
                const response = await fetch('/api/agent-card-a2a');
                const result = await response.json();
                statusDiv.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                statusDiv.textContent = 'A2A Agent Card è·å–å¤±è´¥: ' + error.message;
            }
        }
        
        async function sendMessage() {
            const message = document.getElementById('testMessage').value;
            const responseDiv = document.getElementById('messageResponse');
            responseDiv.textContent = 'æ­£åœ¨å‘é€æ¶ˆæ¯...';
            
            try {
                const response = await fetch('/api/send-message', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: message })
                });
                const result = await response.json();
                responseDiv.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                responseDiv.textContent = 'æ¶ˆæ¯å‘é€å¤±è´¥: ' + error.message;
            }
        }
        
        async function sendMessageA2A() {
            const message = document.getElementById('testMessage').value;
            const responseDiv = document.getElementById('messageResponse');
            responseDiv.textContent = 'æ­£åœ¨é€šè¿‡ A2A SDK å‘é€æ¶ˆæ¯...';
            
            try {
                const response = await fetch('/api/send-message-a2a?message=' + encodeURIComponent(message));
                const result = await response.json();
                responseDiv.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                responseDiv.textContent = 'A2A æ¶ˆæ¯å‘é€å¤±è´¥: ' + error.message;
            }
        }
        
        async function testGrpcConnection() {
            const responseDiv = document.getElementById('messageResponse');
            responseDiv.textContent = 'æ­£åœ¨æµ‹è¯• gRPC è¿æ¥...';
            
            try {
                const response = await fetch('/api/test-grpc');
                const result = await response.json();
                responseDiv.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                responseDiv.textContent = 'gRPC è¿æ¥æµ‹è¯•å¤±è´¥: ' + error.message;
            }
        }
    </script>
</body>
</html>